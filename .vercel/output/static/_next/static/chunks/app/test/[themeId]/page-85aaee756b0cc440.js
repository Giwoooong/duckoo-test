(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{63:(e,t,s)=>{"use strict";var n=s(7260);s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})},5620:(e,t,s)=>{"use strict";s.d(t,{default:()=>d});var n=s(5155),l=s(2619),a=s.n(l),r=s(2115),i=s(63);function o(e){let t=[...e];for(let e=t.length-1;e>0;e-=1){let s=Math.floor(Math.random()*(e+1));[t[e],t[s]]=[t[s],t[e]]}return t}function u(e){let t=o(e.options.map((e,t)=>({text:e,idx:t})));return{...e,options:t.map(e=>e.text),answerIndex:t.findIndex(t=>t.idx===e.answerIndex)}}let c={name:"duckoo-player-name",result:"duckoo-last-result"};function d(e){let{theme:t}=e,s=(0,i.useRouter)(),[l,d]=(0,r.useState)(null),h=(0,r.useMemo)(()=>(function(e,t){let s=20===t?8:Math.floor(.4*t),n=20===t?8:Math.floor(.4*t),l=o(e.filter(e=>"하"===e.difficulty)).slice(0,s),a=[...l,...o(e.filter(e=>"중"===e.difficulty)).slice(0,n),...o(e.filter(e=>"상"===e.difficulty)).slice(0,t-s-n)];if(a.length<t){let s=o(e.filter(e=>!a.includes(e)));a.push(...s.slice(0,t-a.length))}return o(a.slice(0,t)).map(u)})(t.questions,t.questionCount),[t.questions,t.questionCount]),[m,f]=(0,r.useState)(0),[p,x]=(0,r.useState)(Array(h.length).fill(null));if((0,r.useEffect)(()=>{let e=localStorage.getItem(c.name);if(!e){window.alert("닉네임 정보가 없습니다. 홈에서 다시 시작해주세요."),s.replace("/");return}d(e)},[s]),!l)return null;let N=h[m],g=(m+1)/h.length*100;return(0,n.jsx)("div",{className:"shell",children:(0,n.jsx)("main",{className:"panel card-base-styles",children:(0,n.jsxs)("div",{className:"quiz-content-wrapper",children:[(0,n.jsx)("p",{className:"chip",children:t.badge}),(0,n.jsx)("h1",{children:t.name}),(0,n.jsx)("p",{className:"lead",children:t.subtitle}),(0,n.jsxs)("div",{className:"progressBox",children:[(0,n.jsxs)("span",{children:[m+1," / ",h.length]}),(0,n.jsx)("div",{className:"progressTrack",children:(0,n.jsx)("div",{className:"progressFill",style:{width:"".concat(g,"%")}})})]}),(0,n.jsxs)("div",{className:"meta",children:["난이도 ",N.difficulty," | ",N.points,"점"]}),(0,n.jsx)("h2",{className:"question",children:N.question}),(0,n.jsx)("div",{className:"optionList",children:N.options.map((e,a)=>(0,n.jsxs)("button",{className:"optionButton",type:"button",onClick:()=>(e=>{let n=[...p];if(n[m]=e,x(n),m<h.length-1)return void f(m+1);let a=function(e,t){let s=e.reduce((e,t)=>e+t.points,0),n=e.reduce((e,s,n)=>e+(t[n]===s.answerIndex?s.points:0),0);return{score:0===s?0:Math.round(n/s*100),correct:e.reduce((e,s,n)=>e+ +(t[n]===s.answerIndex),0),rawPoints:n,totalPoints:s}}(h,n),r=h.map((e,t)=>({question:e.question,options:e.options,answerIndex:e.answerIndex,selectedIndex:n[t]})),i={themeId:t.id,themeName:t.name,player:l,totalCount:h.length,...a,review:r};localStorage.setItem(c.result,JSON.stringify(i)),s.push("/result?theme=".concat(t.id))})(a),children:[(0,n.jsx)("span",{children:a+1}),e]},"".concat(e,"-").concat(a)))}),(0,n.jsxs)("div",{className:"buttonRow",children:[(0,n.jsx)("button",{type:"button",className:"ghostButton",onClick:()=>f(e=>Math.max(0,e-1)),children:"이전 문제"}),(0,n.jsx)(a(),{href:"/",className:"ghostButton",children:"홈으로"})]})]})})})}},6563:(e,t,s)=>{Promise.resolve().then(s.bind(s,5620))}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=6563)),_N_E=e.O()}]);